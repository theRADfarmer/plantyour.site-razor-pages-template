/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/alpinejs@3.14.9/src/directives/x-model.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import bind,{isCheckbox,isRadio,safeParseBoolean}from"../utils/bind";import{evaluateLater}from"../evaluator";import{directive}from"../directives";import{mutateDom}from"../mutation";import{nextTick}from"../nextTick";import{isCloning}from"../clone";import on from"../utils/on";function getInputValue(e,t,r,a){return mutateDom((()=>{if(r instanceof CustomEvent&&void 0!==r.detail)return null!==r.detail&&void 0!==r.detail?r.detail:r.target.value;if(isCheckbox(e)){if(Array.isArray(a)){let e=null;return e=t.includes("number")?safeParseNumber(r.target.value):t.includes("boolean")?safeParseBoolean(r.target.value):r.target.value,r.target.checked?a.includes(e)?a:a.concat([e]):a.filter((t=>!checkedAttrLooseCompare(t,e)))}return r.target.checked}if("select"===e.tagName.toLowerCase()&&e.multiple)return t.includes("number")?Array.from(r.target.selectedOptions).map((e=>safeParseNumber(e.value||e.text))):t.includes("boolean")?Array.from(r.target.selectedOptions).map((e=>{let t=e.value||e.text;return safeParseBoolean(t)})):Array.from(r.target.selectedOptions).map((e=>e.value||e.text));{let o;return o=isRadio(e)?r.target.checked?r.target.value:a:r.target.value,t.includes("number")?safeParseNumber(o):t.includes("boolean")?safeParseBoolean(o):t.includes("trim")?o.trim():o}}))}function safeParseNumber(e){let t=e?parseFloat(e):null;return isNumeric(t)?t:e}function checkedAttrLooseCompare(e,t){return e==t}function isNumeric(e){return!Array.isArray(e)&&!isNaN(e)}function isGetterSetter(e){return null!==e&&"object"==typeof e&&"function"==typeof e.get&&"function"==typeof e.set}directive("model",((e,{modifiers:t,expression:r},{effect:a,cleanup:o})=>{let i=e;t.includes("parent")&&(i=e.parentNode);let l,n=evaluateLater(i,r);l="string"==typeof r?evaluateLater(i,`${r} = __placeholder`):"function"==typeof r&&"string"==typeof r()?evaluateLater(i,`${r()} = __placeholder`):()=>{};let s=()=>{let e;return n((t=>e=t)),isGetterSetter(e)?e.get():e},u=e=>{let t;n((e=>t=e)),isGetterSetter(t)?t.set(e):l((()=>{}),{scope:{__placeholder:e}})};"string"==typeof r&&"radio"===e.type&&mutateDom((()=>{e.hasAttribute("name")||e.setAttribute("name",r)}));var c="select"===e.tagName.toLowerCase()||["checkbox","radio"].includes(e.type)||t.includes("lazy")?"change":"input";let m=isCloning?()=>{}:on(e,c,t,(r=>{u(getInputValue(e,t,r,s()))}));if(t.includes("fill")&&([void 0,null,""].includes(s())||isCheckbox(e)&&Array.isArray(s())||"select"===e.tagName.toLowerCase()&&e.multiple)&&u(getInputValue(e,t,{target:e},s())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=m,o((()=>e._x_removeModelListeners.default())),e.form){let r=on(e.form,"reset",[],(r=>{nextTick((()=>e._x_model&&e._x_model.set(getInputValue(e,t,{target:e},s()))))}));o((()=>r()))}e._x_model={get:()=>s(),set(e){u(e)}},e._x_forceModelUpdate=t=>{void 0===t&&"string"==typeof r&&r.match(/\./)&&(t=""),window.fromModel=!0,mutateDom((()=>bind(e,"value",t))),delete window.fromModel},a((()=>{let r=s();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(r)}))}));
//# sourceMappingURL=/sm/d8db83a78635462bca727aebdee7291af69f868bb49ea5d4744df764ebae7327.map